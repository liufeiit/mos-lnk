<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/275519; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1127"/>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><span style="font-size: 21px;">消息类型（type）</span></div><div><span style="font-size: 21px;">IQ ：１</span></div><div><span style="font-size: 21px;">Message : 2</span></div><div><span style="font-size: 21px;">Presence : 3</span></div><div><span style="font-size: 21px;">Register : 4</span></div><div><span style="font-size: 21px;">Acknowledge : 5</span></div><div><b style="font-size: 21px;"><b style="font-size: 21px;"><br/></b></b></div>
注册请求报文
<div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;party_id&quot;: &quot;3&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;nick&quot;: &quot;大飞哥儿1&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;passwd&quot;: &quot;123456&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;avatar&quot;: &quot;头像地址&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;weixin&quot;: &quot;微信&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;qq&quot;: &quot;QQ&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;email&quot;: &quot;email&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;telephone&quot;: &quot;手机号码&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;phone&quot;: &quot;固话&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 4</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div><b>注册响应报文</b></div></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;party_id&quot;: &quot;3&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;nick&quot;: &quot;大飞哥儿1&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;avatar&quot;: &quot;头像地址&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;weixin&quot;: &quot;微信&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;qq&quot;: &quot;QQ&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;email&quot;: &quot;email&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;telephone&quot;: &quot;手机号码&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;phone&quot;: &quot;固话&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;gmt_created&quot;: 1434293180901,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;status&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 123,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 4</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div>其中mid是用户在聊天系统中的唯一编号，status表示本次请求处理的状态 1：成功 2：失败</div></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><b>心跳检测请求报文</b></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 123,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 1</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div><b>心跳检测响应报文</b></div></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;status&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 123,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 1</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div>status表示在线状态 1：在线 2：离线</div></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><b>发送消息请求报文</b></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;tid&quot;: 4,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;body&quot;: &quot;你好啊&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;gmt_created&quot;: 1434293180912,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 2</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div>上述消息表示mid为123的用户给mid为456的用户发送消息 <span style="font-family: &apos;Courier New&apos;; text-align: -webkit-left;">gmt-created表示发送消息的时间的毫秒表示形式</span></div><div><span style="font-family: &apos;Courier New&apos;; text-align: -webkit-left;">消息发送之后的回执报文</span></div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;status&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 5</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div>上述的报文是给发送方一个回执 status表示发送方发送的消息状态 1：对方在线 消息成功发送  2：对方离线 带对方出席之后 会将消息推送过去 3：发送方不存在 即非法的消息</div><div><span style="font-family: &apos;Courier New&apos;; text-align: -webkit-left;"> 同时消息接收方将接收到的消息报文</span></div><div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt"><br/></span></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;party_id&quot;: &quot;发送消息的人的第三方绑定账号&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;nick&quot;: &quot;发送消息的人的昵称&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;avatar&quot;: &quot;发送消息的人的头像&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;tid&quot;: 4,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;body&quot;: &quot;你好啊&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;gmt_created&quot;: 1434293180912,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;status&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 2</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt"><br/></span></font></div></td></tr></tbody></table><div>上述报文表示mid为456的用户接收到了来做mid为123的用户发送过来的消息</div></div><div>status表示消息处理状态 1：成功</div></div><div style="font-size: 21px;"><div><b><br/>
出席（登录）请求报文</b></div><div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;passwd&quot;: &quot;123456&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 3</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div><b>出席（登录）响应报文</b></div></div><div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;status&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;mid&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &quot;type&quot;: 3</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">}</span></font></div></div><div align="left"><font face="Courier New"><br/></font></div></td></tr></tbody></table><div>status表示本次出席操作结果 1：出席成功 2：出席失败</div></div>
出席成功之后 如果123这个用户在离线的时候有其他用户给他发送消息 那么这样的离线消息在 用户登录之后会收到一条到多条消息</div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New"><br/></font></div><div align="left"><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">{</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;party_id&quot;: &quot;发送消息的人的第三方绑定账号&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;nick&quot;: &quot;发送消息的人的昵称&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;avatar&quot;: &quot;发送消息的人的头像&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;tid&quot;: 4,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;body&quot;: &quot;你好啊&quot;,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;gmt_created&quot;: 1434293180912,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;status&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;mid&quot;: 1,</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &quot;type&quot;: 2</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">}</span></font></div></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;"><br/></span></font></div></td></tr></tbody></table><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div><br/></div></span>
</div></body></html> 