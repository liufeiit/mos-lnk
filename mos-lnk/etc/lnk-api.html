<html>
<head>
  <title>Evernote Export</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/275519; Windows/6.1.7601 Service Pack 1;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1127"/>

<div>
<span style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><b style="font-size: 21px;">注册请求报文</b><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;register party-id=&quot;第三方账号绑定&quot;&gt;</font></div><div align="left"><font face="Courier New">  &lt;nick&gt;昵称&lt;/nick&gt;</font></div><div align="left"><font face="Courier New">  &lt;passwd&gt;密码&lt;/passwd&gt;</font></div><div align="left"><font face="Courier New">  &lt;avatar&gt;头像地址&lt;/avatar&gt;</font></div><div align="left"><font face="Courier New">  &lt;weixin&gt;微信&lt;/weixin&gt;</font></div><div align="left"><font face="Courier New">  &lt;qq&gt;QQ&lt;/qq&gt;</font></div><div align="left"><font face="Courier New">  &lt;email&gt;email&lt;/email&gt;</font></div><div align="left"><font face="Courier New">  &lt;telephone&gt;手机号码&lt;/telephone&gt;</font></div><div align="left"><font face="Courier New">  &lt;phone&gt;固话&lt;/phone&gt;</font></div><div align="left"><font face="Courier New">&lt;/register&gt;</font></div></td></tr></tbody></table><div><b>注册响应报文</b></div></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;register mid=&quot;123&quot; party-id=&quot;第三方账号绑定&quot; status=&quot;1&quot;&gt;</font></div><div align="left"><font face="Courier New">  &lt;nick&gt;昵称&lt;/nick&gt;</font></div><div align="left"><font face="Courier New">  &lt;avatar&gt;头像地址&lt;/avatar&gt;</font></div><div align="left"><font face="Courier New">  &lt;weixin&gt;微信&lt;/weixin&gt;</font></div><div align="left"><font face="Courier New">  &lt;qq&gt;QQ&lt;/qq&gt;</font></div><div align="left"><font face="Courier New">  &lt;email&gt;email&lt;/email&gt;</font></div><div align="left"><font face="Courier New">  &lt;telephone&gt;手机号码&lt;/telephone&gt;</font></div><div align="left"><font face="Courier New">  &lt;phone&gt;固话&lt;/phone&gt;</font></div><div align="left"><font face="Courier New">  &lt;gmt-created&gt;1433429989418&lt;/gmt-created&gt;</font></div><div align="left"><font face="Courier New">&lt;/register&gt;</font></div></td></tr></tbody></table><div>其中mid是用户在聊天系统中的唯一编号，status表示本次请求处理的状态 1：成功 2：失败</div></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><b>心跳检测请求报文</b></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;iq mid=&quot;123&quot;/&gt;</font></div></td></tr></tbody></table><div><b>心跳检测响应报文</b></div></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;iq mid=&quot;123&quot; status=&quot;1&quot;/&gt;</font></div></td></tr></tbody></table><div>status表示在线状态 1：在线 2：离线</div></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><b>好友关系订阅请求报文</b></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;subscribe mid=&quot;123&quot; smid=&quot;456&quot; act=&quot;1&quot;/&gt;</font></div></td></tr></tbody></table><div><br/></div></div><div style="font-size: 21px;">smid表示被订阅的好友 act表示订阅操作 1：订阅 2：取消订阅 3：好友列表查询</div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><b>好友关心订阅响应报文</b></div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;subscribe mid=&quot;123&quot; act=&quot;1&quot; status=&quot;1&quot;&gt;</font></div><div align="left"><font face="Courier New">  &lt;sub-usr smid=&quot;456&quot; party-id=&quot;好友第三方绑定账号&quot;&gt;</font></div><div align="left"><font face="Courier New">    &lt;nick&gt;好友昵称&lt;/nick&gt;</font></div><div align="left"><font face="Courier New">    &lt;avatar&gt;好友头像&lt;/avatar&gt;</font></div><div align="left"><font face="Courier New">  &lt;/sub-usr&gt;</font></div><div align="left"><font face="Courier New">  &lt;sub-usr smid=&quot;456&quot; party-id=&quot;好友第三方绑定账号&quot;&gt;</font></div><div align="left"><font face="Courier New">    &lt;nick&gt;好友昵称&lt;/nick&gt;</font></div><div align="left"><font face="Courier New">    &lt;avatar&gt;好友头像&lt;/avatar&gt;</font></div><div align="left"><font face="Courier New">  &lt;/sub-usr&gt;</font></div><div align="left"><font face="Courier New">&lt;/subscribe&gt;</font></div></td></tr></tbody></table><div>status表示本次订阅操作是否成功，1：成功 2：对方不存在 3：订阅失败 4：非法的操作</div></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;">发送消息请求报文</div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;message mid=&quot;123&quot; tid=&quot;456&quot; gmt-created=&quot;1433431254483&quot;&gt;</font></div><div align="left"><font face="Courier New">  &lt;body&gt;消息体&lt;/body&gt;</font></div><div align="left"><font face="Courier New">&lt;/message&gt;</font></div></td></tr></tbody></table><div>上述消息表示mid为123的用户给mid为456的用户发送消息 <span style="font-family: &apos;Courier New&apos;; text-align: -webkit-left;">gmt-created表示发送消息的时间的毫秒表示形式</span></div><div><span style="font-family: &apos;Courier New&apos;; text-align: -webkit-left;">消息发送之后的回执报文</span></div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;ack mid=&quot;123&quot; status=&quot;1&quot;/&gt;</font></div></td></tr></tbody></table><div>上述的报文是给发送方一个回执 status表示发送方发送的消息状态 1：对方在线 消息成功发送  2：对方离线 带对方出席之后 会将消息推送过去 3：发送方不存在 即非法的消息</div><div><span style="font-family: &apos;Courier New&apos;; text-align: -webkit-left;"> 同时消息接收方将接收到的消息报文</span></div><div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">&lt;message mid=&quot;123&quot; party-id=&quot;发送消息的人的第三方绑定账号&quot; tid=&quot;456&quot; gmt-created=&quot;1433431884016&quot; status=&quot;1&quot;&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &lt;nick&gt;发送消息的人的昵称&lt;/nick&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &lt;avatar&gt;发送消息的人的头像&lt;/avatar&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">  &lt;body&gt;消息体&lt;/body&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size:16pt">&lt;/message&gt;</span></font></div></td></tr></tbody></table><div>上述报文表示mid为456的用户接收到了来做mid为123的用户发送过来的消息</div></div><div>status表示消息处理状态 1：成功</div></div><div style="font-size: 21px;"><div><b><br/>
出席（登录）请求报文</b></div><div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;presence mid=&quot;123&quot; passwd=&quot;密码&quot;/&gt;</font></div></td></tr></tbody></table><div><b>出席（登录）响应报文</b></div></div><div><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New">&lt;presence mid=&quot;123&quot; status=&quot;1&quot;/&gt;</font></div></td></tr></tbody></table><div>status表示本次出席操作结果 1：出席成功 2：出席失败</div></div>
出席成功之后 如果123这个用户在离线的时候有其他用户给他发送消息 那么这样的离线消息在 用户登录之后会收到一条到多条消息</div><div style="font-size: 21px;"><table border="1" cellpadding="2" cellspacing="0" width="100%"><tbody><tr><td valign="top"><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">&lt;message mid=&quot;123&quot; party-id=&quot;发送消息的人的第三方绑定账号&quot; tid=&quot;456&quot; gmt-created=&quot;1433431884016&quot; status=&quot;1&quot;&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &lt;nick&gt;发送消息的人的昵称&lt;/nick&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &lt;avatar&gt;发送消息的人的头像&lt;/avatar&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">  &lt;body&gt;消息体&lt;/body&gt;</span></font></div><div align="left"><font face="Courier New" size="4"><span style="font-size: 16pt;">&lt;/message&gt;</span></font></div></td></tr></tbody></table><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div style="font-size: 21px;"><br/></div><div><br/></div></span>
</div></body></html> 